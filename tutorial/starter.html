<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Harvest | Tutorials</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="Harvest | Tutorials"/><meta property="og:type" content="website"/><meta property="og:image" content="https://tfukaza.github.io/harvest/logo.png"/><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="8"/><link rel="preload" href="/harvest/_next/static/css/9234f076af674b46f1fa.css" as="style"/><link rel="stylesheet" href="/harvest/_next/static/css/9234f076af674b46f1fa.css" data-n-g=""/><link rel="preload" href="/harvest/_next/static/css/ae2f954c1ea343bb25ba.css" as="style"/><link rel="stylesheet" href="/harvest/_next/static/css/ae2f954c1ea343bb25ba.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/harvest/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/harvest/_next/static/chunks/webpack-cbbc29f1abb9f2e9dccd.js" defer=""></script><script src="/harvest/_next/static/chunks/framework-64eb7138163e04c228e4.js" defer=""></script><script src="/harvest/_next/static/chunks/main-5ce060fea79805d6dc3e.js" defer=""></script><script src="/harvest/_next/static/chunks/pages/_app-2767ddbc84b83c8aece3.js" defer=""></script><script src="/harvest/_next/static/chunks/317-143a9250ab4e47b62052.js" defer=""></script><script src="/harvest/_next/static/chunks/793-93caa09111e52b563b2c.js" defer=""></script><script src="/harvest/_next/static/chunks/pages/tutorial/starter-a321ff7ead9544878ce7.js" defer=""></script><script src="/harvest/_next/static/9SRwTQh_IwDBoNsh13gxq/_buildManifest.js" defer=""></script><script src="/harvest/_next/static/9SRwTQh_IwDBoNsh13gxq/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="Home_container__3sao-"><nav class="Home_nav__2iapp"><div><a id="Home_logo__3GqVp" href="/harvest"><img src="/harvest//wordmark.svg" alt="img"/></a></div><div><a href="/harvest/tutorial">Tutorials</a><a href="/harvest/docs">Docs</a></div><div><a class="rowcrop_button__1n6eZ Home_github__3XEl-" href="https://github.com/tfukaza/harvest">GitHub</a></div></nav><main class="Home_main__1Z1aG"><section></section><section class="Home_section__354aW"><div class="Home_text__dq4ii"><h1>Startup Guide</h1><h2>Prerequisites</h2><p>Before we begin, make sure you have the following:</p><ul><li>Python, version 3.8 or higher.</li><li>A code editing software.</li><li>An account for a brokerage. In this tutorial we will be using Robinhood.</li><li>Basic coding skills. If you&#x27;ve written anything more than &#x27;Hello World&#x27;, you should be good to go.</li></ul><h2>Installing</h2><p>First things first, let&#x27;s install the library. </p><pre class="hljs"><code class="language-bash" style="white-space:pre"><span class="">pip install -e git+https://github.com/tfukaza/harvest.git</span></code></pre><p>Next, we install additional libraries depending on which broker you want to use. Harvest will do this automatically, using the following command:</p><pre class="hljs"><code class="language-bash" style="white-space:pre"><span class="">pip install -e git+https://github.com/tfukaza/harvest.git</span><span class="hljs-comment">#egg=harvest[BROKER]</span></code></pre><p>Where BROKER is replaced by one of the following brokers supported by Harvest:</p><ul><li>Robinhood</li></ul><p>On MacOS&#x27;s zsh, you will need to use the following format instead:</p><pre class="hljs"><code class="language-bash" style="white-space:pre"><span class="">pip install -e </span><span class="hljs-string">&#x27;git+https://github.com/tfukaza/harvest.git#egg=harvest[BROKER]&#x27;</span></code></pre><h2>Example Code</h2><p>Once you have everything installed, we are ready to begin writing the code. For this example we will use Robinhood, but the code is still mostly the same if you decide to use other brokers. Before we begin, there are three components of Harvest you need to know:</p><ul><li>Trader: The main module responsible for managing the other modules.</li><li>Broker: The module that communicates with the brokerage you are using.</li><li>Algo: The module where you define your algorithm.</li></ul><p>We begin coding by import the aforementioned components, or &#x27;modules&#x27; as they are called in Python.</p><pre class="hljs"><code class="language-python" style="white-space:pre"><span class="hljs-keyword">from</span><span class=""> harvest.algo </span><span class="hljs-keyword">import</span><span class=""> BaseAlgo
</span><span class=""></span><span class="hljs-keyword">from</span><span class=""> harvest.trader </span><span class="hljs-keyword">import</span><span class=""> Trader
</span><span class=""></span><span class="hljs-keyword">from</span><span class=""> harvest.broker.robinhood </span><span class="hljs-keyword">import</span><span class=""> RobinhoodBroker</span></code></pre><p>Then we create a Trader, which will be the starting point of Harvest</p><pre class="hljs"><code class="language-python" style="white-space:pre"><span class="hljs-keyword">if</span><span class=""> __name__ == </span><span class="hljs-string">&quot;__main__&quot;</span><span class="">:
</span>t = Trader( RobinhoodBroker() )
</code></pre><p>Few things happen here, and don&#x27;t worry, this is as complex as Harvest will get (for now). The trader class is instantiated. Traders take two Brokers as input, a streamer and a broker. streamer is the broker used to retrieve stock/cryto data. broker is the brokerage used to place orders and manage your portfolio. For this example, we initialize RobinhoodBroker. The broker automatically reads the credentials saved in secret.yaml and sets up a connection with the broker. The Robinhood broker is specified as a streamer and will be used to get stock/crypto data. If the broker is unspecified, Robinhood will also be used as a broker. Fortunately after this, things get pretty easy. We specify what stock to track, in this case Twitter (TWTR).</p><pre class="hljs"><code class="language-python" style="white-space:pre"><span class="">t.add_symbol(</span><span class="hljs-string">&#x27;TWTR&#x27;</span><span class="">)</span></code></pre><p>At this point, we define our algorithm. Algorithms are created by extending the BaseAlgo class.</p><pre class="hljs"><code class="language-python" style="white-space:pre"><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">Twitter</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseAlgo</span><span class="hljs-class">):</span><span class="">
</span><span class="">                    </span><span class="hljs-function hljs-keyword">def</span><span class="hljs-function"> </span><span class="hljs-function hljs-title">algo_init</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self</span><span class="hljs-function">):</span><span class="">
</span><span class="">                        </span><span class="hljs-keyword">pass</span><span class="">
</span>
<span class="">                    </span><span class="hljs-function hljs-keyword">def</span><span class="hljs-function"> </span><span class="hljs-function hljs-title">handler</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, meta</span><span class="hljs-function">):</span><span class="">
</span><span class="">                        </span><span class="hljs-keyword">pass</span></code></pre><p>every Algo must define two functions algo_init: Function called right before the algorithm starts handler: Function called at a specified interval. In this example, we create a simple algorithm that buys and sells a single stock.</p><pre class="hljs"><code class="language-python" style="white-space:pre"><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">Twitter</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseAlgo</span><span class="hljs-class">):</span><span class="">
</span><span class="">    </span><span class="hljs-function hljs-keyword">def</span><span class="hljs-function"> </span><span class="hljs-function hljs-title">algo_init</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self</span><span class="hljs-function">):</span><span class="">
</span><span class="">        self.hold = </span><span class="hljs-literal">False</span><span class="">
</span>
<span class="">    </span><span class="hljs-function hljs-keyword">def</span><span class="hljs-function"> </span><span class="hljs-function hljs-title">handler</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, meta</span><span class="hljs-function">):</span><span class="">
</span><span class="">        </span><span class="hljs-keyword">if</span><span class=""> self.hold:
</span><span class="">            self.sell(</span><span class="hljs-string">&#x27;TWTR&#x27;</span><span class="">, </span><span class="hljs-number">1</span><span class="">)
</span><span class="">            self.hold = </span><span class="hljs-literal">False</span><span class="">
</span><span class="">        </span><span class="hljs-keyword">else</span><span class="">:
</span><span class="">            self.buy(</span><span class="hljs-string">&#x27;TWTR&#x27;</span><span class="">, </span><span class="hljs-number">1</span><span class="">)
</span><span class="">            self.hold = </span><span class="hljs-literal">True</span></code></pre><p>Finally, we tell the trader to use this algorithm, and run it. Below is the final code after putting everything together.</p><pre class="hljs"><code class="language-python" style="white-space:pre"><span class="hljs-keyword">from</span><span class=""> harvest.algo </span><span class="hljs-keyword">import</span><span class=""> BaseAlgo
</span><span class=""></span><span class="hljs-keyword">from</span><span class=""> harvest.trader </span><span class="hljs-keyword">import</span><span class=""> Trader
</span><span class=""></span><span class="hljs-keyword">from</span><span class=""> harvest.broker.robinhood </span><span class="hljs-keyword">import</span><span class=""> RobinhoodBroker
</span>
<span class=""></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">Twitter</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseAlgo</span><span class="hljs-class">):</span><span class="">
</span><span class="">    </span><span class="hljs-function hljs-keyword">def</span><span class="hljs-function"> </span><span class="hljs-function hljs-title">algo_init</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self</span><span class="hljs-function">):</span><span class="">
</span><span class="">        self.hold = </span><span class="hljs-literal">False</span><span class="">
</span>
<span class="">    </span><span class="hljs-function hljs-keyword">def</span><span class="hljs-function"> </span><span class="hljs-function hljs-title">handler</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, meta</span><span class="hljs-function">):</span><span class="">
</span><span class="">        </span><span class="hljs-keyword">if</span><span class=""> self.hold:
</span><span class="">            self.sell(</span><span class="hljs-string">&#x27;TWTR&#x27;</span><span class="">, </span><span class="hljs-number">1</span><span class="">)    
</span><span class="">            self.hold = </span><span class="hljs-literal">False</span><span class="">
</span><span class="">        </span><span class="hljs-keyword">else</span><span class="">:
</span><span class="">            self.buy(</span><span class="hljs-string">&#x27;TWTR&#x27;</span><span class="">, </span><span class="hljs-number">1</span><span class="">)
</span><span class="">            self.hold = </span><span class="hljs-literal">True</span><span class="">
</span>
<span class=""></span><span class="hljs-keyword">if</span><span class=""> __name__ == </span><span class="hljs-string">&quot;__main__&quot;</span><span class="">:
</span><span class="">    t = Trader( RobinhoodBroker(), </span><span class="hljs-literal">None</span><span class=""> )
</span><span class="">    t.add_symbol(</span><span class="hljs-string">&#x27;TWTR&#x27;</span><span class="">)
</span>    t.set_algo(Twitter())
<span class="">    t.run(interval=</span><span class="hljs-string">&#x27;1DAY&#x27;</span><span class="">)</span></code></pre><p>By specifying interval=&#x27;1DAY&#x27; in run, the handler function will be called once every day.</p><p>Now run the code. If this is the first time connecting to Robinhood, you should see a setup wizard pop up. Follow the steps to set up login credentials for Robinhood.</p></div></section></main><footer class="Home_footer__2v49s"><section class="Home_section__354aW"><div><img src="/harvest//wordmark.svg" alt="img"/><a href="https://github.com/tfukaza/harvest/issues/new?assignees=&amp;labels=bug&amp;template=bug_report.md&amp;title=%5B%F0%9F%AA%B0BUG%5D">Report a Bug</a><a href="https://github.com/tfukaza/harvest/issues/new?assignees=&amp;labels=enhancement%2C+question&amp;template=feature-request.md&amp;title=%5B%F0%9F%92%A1Feature+Request%5D">Suggest a Feature</a></div><div><h3>Special thanks to these projects:</h3><a href="https://github.com/jmfernandes/robin_stocks">robin_stocks</a></div></section></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/tutorial/starter","query":{},"buildId":"9SRwTQh_IwDBoNsh13gxq","assetPrefix":"/harvest","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>